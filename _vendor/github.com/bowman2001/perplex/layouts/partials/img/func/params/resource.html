{{ $rp := dict  }}
{{ with .Name }}{{ $rp = merge $rp (dict "name" . ) }}{{ end }}
{{ with .Title }}
    {{ if not (eq . (path.Base $.Key)) }}{{ $rp = merge $rp (dict "title" . ) }}{{ end }}
{{ end }}
{{ with .Params }}
    {{ with .alt }}{{ $rp = merge $rp (dict "alt" . ) }}{{ end }}
    {{ with .anchor }}{{ $rp = merge $rp (dict "anchor" . ) }}{{ end }}
    {{ with .attr }}{{ $rp = merge $rp (dict "attr" . ) }}{{ end }}
    {{ with .attrlink }}{{ $rp = merge $rp (dict "attrlink" . ) }}{{ end }}
    {{ with .caption }}{{ $rp = merge $rp (dict "caption" . ) }}{{ end }}
    {{ with .class }}{{ $rp = merge $rp (dict (slice "class plain") ( . | lower )) }}{{ end }}
    {{ with .hint }}{{ $rp = merge $rp (dict "hint" (. | lower ) ) }}{{ end }}
    {{ with .id }}{{ $rp = merge $rp (dict "id" (. | lower )) }}{{ end }}
    {{ with .link }}{{ $rp = merge $rp (dict "link" (. | lower ) ) }}{{ end }}
    {{ with .pos }}{{ $rp = merge $rp (dict (slice "class" "posh") ( . | lower )) }}{{ end }}
    {{ with .posh }}{{ $rp = merge $rp (dict (slice "class" "posh") ( . | lower )) }}{{ end }}
    {{ with .posv }}{{ $rp = merge $rp (dict (slice "class" "posv") ( . | lower )) }}{{ end }}
    {{ with .ratio }}{{ $rp = merge $rp (dict "ratio"  .  ) }}{{ end }}
    {{ with .rel }}{{ $rp = merge $rp (dict "rel" ( . | lower ) ) }}{{ end }}
    {{ with .rotate }}{{ $rp = merge $rp (dict "rotate"  .  ) }}{{ end }}
    {{ with .size }}{{ $rp = merge $rp (dict (slice "class" "size") ( . | lower )) }}{{ end }}
    {{ with .target }}{{ $rp = merge $rp (dict "target" ( . | lower ) ) }}{{ end }}
{{ end }}
{{ return $rp }}
