{{ $img := ( partial "img/func/get-featuredResource.html" . ) }}
{{ $imgLink := (partial "img/func/get-unsplashLink.html" $img )}}
{{ $imgclass := "" }}
{{ with $img }}
  <figure class="md">
      {{ if eq .MediaType.SubType "svg" }}
        <img class="img-svg" src="{{ .RelPermalink }}" alt="{{ .Name }}" title="{{ .Title }}">
      {{ else }}
          {{ if eq .MediaType.SubType "png" }}
              {{ $imgclass = "img-png" }}
          {{ end }}
          {{ $maxcolpx := mul 2 (mul $.Site.Params.layout.measure $.Site.Params.layout.xmax) }}
          {{ $img1 := .Resize (printf "%.0fx" $maxcolpx) }}
          {{ $img15 := .Resize (printf "%.0fx" (mul $maxcolpx 1.5)) }}
          {{ $img2 := .Resize (printf "%.0fx" (mul $maxcolpx 2)) }}
          {{ $img25 := .Resize (printf "%.0fx" (mul $maxcolpx 2.5)) }}
          {{ $img3 := .Resize (printf "%.0fx" (mul $maxcolpx 3)) }}
          <img {{ with $imgclass }}class="{{ . }}"{{ end }} src="{{ $img1.RelPermalink }}" alt="{{ .Name }}"
               title="{{ .Title }}"
               srcset="{{ $img15.RelPermalink }} 1.5x, {{ $img2.RelPermalink }} 2x, {{ $img3.RelPermalink }} 3x"
               width="{{ $img1.Width }}" height="{{ $img1.Height }}" loading="lazy">
      {{ end }}
      {{ with $imgLink }}
        <figcaption>
          <div class="attr">Source: <a href="{{ . }}" target="_blank">Unsplash</a></div>
        </figcaption>
      {{ end }}
  </figure>
{{ end }}
